<!-- Admin Messages Component - Include this in all admin pages -->

<!-- Add this CSS link in the <head> section -->
<link rel="stylesheet" href="/css/admin-messages.css">

<!-- Add this script before closing </body> tag -->
<script src="/js/admin-messages.js"></script>

<!-- Floating Admin Message Button -->
<button class="floating-admin-message-btn" data-bs-toggle="modal" data-bs-target="#adminMessageModal" aria-label="Open Admin Messages">
  <i class="bi bi-chat-dots-fill"></i>
  <span class="admin-message-badge" id="adminMessageBadge" style="display: none;">0</span>
</button>

<!-- Admin Message Modal -->
<div class="modal fade" id="adminMessageModal" tabindex="-1" aria-labelledby="adminMessageModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="adminMessageModalLabel">
          <i class="bi bi-shield-fill-check"></i> Community Messages
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-0">
        <div id="adminAlertContainer"></div>
        <div class="admin-messages-container" id="adminMessagesContainer">
          <div class="text-center py-3">
            <div class="spinner-border spinner-pink spinner-border-sm" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer border-top">
        <div class="w-100">
          <div class="mention-all-info-banner">
            <i class="bi bi-info-circle-fill"></i>
            <span>Type <strong>@everyone</strong> in your message to notify all active users</span>
          </div>
          <div class="input-group">
            <textarea 
              class="form-control" 
              id="adminMessageInput" 
              placeholder="Type your message... (use @everyone to notify all)" 
              rows="1"
              maxlength="500"
              onkeypress="handleAdminMessageKeyPress(event)"
              oninput="autoResizeAdminTextarea(this)"></textarea>
            <button class="btn btn-pink" type="button" id="adminSendBtn" onclick="sendAdminMessage()">
              <i class="bi bi-send-fill"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Initialize Admin Messages -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    initAdminMessages();
  });
</script>
